\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage{tabularx}
\usepackage{mathrsfs}
\usepackage{pgf}


\usepackage{amsmath}
\usepackage{amsmath,times} %% times package needed only to load TNR text font
\usepackage{array}
\usepackage{pifont}% http://ctan.org/pkg/pifont
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
% \usepackage{enumitem}
\usepackage[ruled]{algorithm2e}
\usepackage{underoverlap}
% \usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{tabularx}
\usepackage{mathrsfs}
\usepackage{pgf}
\usepackage{amsmath}
\usepackage{array}
\usepackage{tabularx}
\usepackage[nointegrals]{wasysym}
\usepackage{xcolor,colortbl}

\usepackage{multirow}
\usepackage{adjustbox}

\usepackage{booktabs}
\usepackage{subfig}

\usepackage{pifont}% http://ctan.org/pkg/pifont
\usepackage{tikz}
\usetikzlibrary{calc, chains, decorations.pathmorphing}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows,shapes,positioning}
\usetikzlibrary{calc,decorations.markings}
\usetikzlibrary{decorations.text}
\usetikzlibrary{patterns}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{plotmarks}
\usepackage{color, soul}

\input{abbr}



\begin{document}

\author{Hakan \textsc{METIN}}

\begin{frame}
\frametitle{Exploitation des symétries dynamiques pour la résolution des problèmes SAT}
\framesubtitle{Thèse de doctorat de Sorbonne Université}
 
   Hakan \textsc{Metin}\\
  \vfill
  %\begin{center}

	\scriptsize
    \begin{tabular}{ll}
 	    \textbf{Jury Members:} & \\
    	\textsc{Pascal \textsc{Fontaine}}  &  Maître de conférences, Université de Liège\\
    	\textsc{Laure Petrucci}  & Professeur, Université Paris 13\\
    	\textsc{Jean-Michel	Couvreur}  & Professeur, Université d'Orléans\\
    	\textsc{Emanuelle Encrenaz}  & Maître de conférences, Sorbonne Université\\
    	\textsc{Souheib Baarir}  & Maître de conférences, Université Paris Nanterre\\
    	\vspace{1em}
    	\textsc{Fabrice Kordon}  & Professeur, Sorbonne Université\\
    	
 	    \textbf{Supervisors:} & \\
    	\textsc{Souheib Baarir}  & Maître de conférences, Université Paris Nanterre\\

    	\textsc{Fabrice Kordon}  & Professeur, Sorbonne Université\\
    \end{tabular}\\
 % \end{center}

  \vskip 3ex
  \begin{columns}[t]
    \begin{column}[T]{\textwidth}
      \includegraphics[height=1.2cm]{images/logo_sorbonne}
      \hfill
      \includegraphics[height=1.3cm]{images/lip6}
      \centering
    \end{column}
  \end{columns}
\end{frame}

%% ----------------------------------------------------------------------------
\begin{frame}

\frametitle{Motivation}
SAT is widely used in different domains:

\begin{itemize}
	\item Artificial intelligence (planning, games, ...)
	\item Bioinformatics (haplotype inference, ...)
	\item Security (cryptanalysis, inversion attack on hash function)
	\item Computationally hard problems (graph coloring, ...)
	\item Formal Methods (hardware model checking, ...)
\end{itemize}

\end{frame}
%% ----------------------------------------------------------------------------
\begin{frame}
 %Tackling the explosion in the static symmetry breaking approach
 %Taking the maximum benefits from static and dynamic approaches
\frametitle{Outline}
\begin{enumerate}
	\item \textcolor{UPMCEngagementBlueB}{SAT overview}
	\begin{itemize}
		\item[] SAT basics
		\item[] SAT and symmetries
	\end{itemize}
\vspace{5pt}
	\item \textcolor{UPMCEngagementBlueB}{Existing approaches}
	\begin{itemize}
		\item[] \phantom{Static symmetry breaking}
		\item[] \phantom{Dynamic symmetry breaking}
	\end{itemize}
\vspace{5pt}
	\item \textcolor{UPMCEngagementBlueB}{Contribution and results} 
	\begin{itemize}
		\item[] \phantom{CDCL [Sym]}
		\item[] \phantom{Combination of different approaches}
	\end{itemize}
\end{enumerate}
\end{frame}
%% ----------------------------------------------------------------------------
\begin{frame}

\tikzstyle{every picture}+=[remember picture]
\frametitle{SAT an example}
\everymath{\displaystyle}
\centering


\begin{tabular}{ccc}
	\includegraphics[scale=0.07]{images/room} & \includegraphics[scale=0.07]{images/room}& \includegraphics[scale=0.07]{images/room}\\
	\tikz[baseline]{\node[anchor=base] (t1){1};} & \tikz[baseline]{\node[anchor=base] (t2){2};} & \tikz[baseline]{\node[anchor=base] (t3){3};}\\
	 & & \\
	\tikz[baseline]{\node[anchor=base] (s1){};} & \tikz[baseline]{\node[anchor=base] (s2){};} & \tikz[baseline]{\node[anchor=base] (s3){};}\\
	\includegraphics[scale=0.1]{images/south} & \includegraphics[scale=0.1]{images/simpson} & \includegraphics[scale=0.09]{images/titeuf}\\
	A                                         & B                                           & C\\
\end{tabular}


\begin{tikzpicture}[overlay]
\tikzstyle{line} = [<-, line width=0.5mm];
\visible<2>{
\path[line] (t1) edge  (s1.south);
\path[line] (t2) edge  (s2.south);
\path[line] (t3) edge  (s3.south);
}
\visible<3>{
\path[line, color=red] (t1) edge  (s2.south);
\path[line, color=red] (t2) edge  (s1.south);
\path[line, color=red] (t3) edge  (s3.south);

\path[line, color=orange] (t1) edge  (s1.south);
\path[line, color=orange] (t2) edge  (s3.south);
\path[line, color=orange] (t3) edge  (s2.south);

\path[line, color=blue] (t1) edge  (s3.south);
\path[line, color=blue] (t2) edge  (s2.south);
\path[line, color=blue] (t3) edge  (s1.south);

\path[line, color=green] (t2.south west) edge  (s1.south);
\path[line, color=green] (t3.south west) edge  (s2.south);
\path[line, color=green] (t1.south west) edge  (s3.south);

\path[line, color=purple] (t1.south west) edge  (s2.south);
\path[line, color=purple] (t2.south west) edge  (s3.south);
\path[line, color=purple] (t3.south west) edge  (s1.south);
}
\end{tikzpicture}

\vfill
Is it possible to attribute each group to a classroom?\\
\begin{center}
	\visible<2->{YES!}
	\visible<3->{Many solutions}
\end{center}


\end{frame}
%% ----------------------------------------------------------------------------



%% ----------------------------------------------------------------------------
%\begin{frame}
%\frametitle{Encoding the problem}
%\begin{columns}
%	\begin{column}{0.1\textwidth}
%		\small
%	$(A,1) (A,2) (A,3)$\\
%	$(B,1) (B,2) (B,3)$\\
%	$(C,1) (C,2) (C,3)$\\
%	\vspace{1em}
%	$ \neg (A,1)  \neg (B,1)$\\
%	$ \neg (A,1)  \neg (C,1)$\\
%	$ \neg (B,1)  \neg (C,1)$\\
%	\vspace{1em}
%	$ \neg (A,2)  \neg (B,2)$\\
%	$ \neg (A,2)  \neg (C,2)$\\
%	$ \neg (B,2)  \neg (C,2)$\\
%	\vspace{1em}
%	$ \neg (A,3)  \neg (B,3)$\\
%	$ \neg (A,3)  \neg (C,3)$\\
%	$ \neg (B,3)  \neg (C,3)$\\
%	\end{column}
%	\begin{column}{0.2\textwidth}  %%<--- here
%		\small
%$ x_1 \lor  x_2 \lor x_3 $ \\
%$x_4 \lor  x_5 \lor x_6 $ \\
%$x_7 \lor  x_8 \lor x_9 $ \\
%	\vspace{1em}
%$ \neg x_1 \lor  \neg x_4 $ \\
%$ \neg x_1 \lor  \neg x_7 $ \\
%$ \neg x_4 \lor  \neg x_7 $ \\
%	\vspace{1em}
%$\neg x_2 \lor  \neg x_5 $ \\
%$ \neg x_2 \lor  \neg x_8 $ \\
%$ \neg x_5 \lor  \neg x_8 $ \\
%	\vspace{1em}
%$ \neg x_3 \lor  \neg x_6 $ \\
%$ \neg x_3 \lor  \neg x_9 $ \\
%$ \neg x_6 \lor  \neg x_9 $ \\
%	\end{column}
%\end{columns}
%
%%$\omega_1 = x_1 \lor  x_2 \lor x_3 $ \\
%%$\omega_2 = x_4 \lor  x_5 \lor x_6 $ \\
%%$\omega_3 = x_7 \lor  x_8 \lor x_9 $ \\
%%\vspace{1em}
%%$\omega_4 = \neg x_1 \lor  \neg x_4 $ \\
%%$\omega_5 = \neg x_1 \lor  \neg x_7 $ \\
%%$\omega_6 = \neg x_4 \lor  \neg x_7 $ \\
%%\vspace{1em}
%%$\omega_7 = \neg x_2 \lor  \neg x_5 $ \\
%%$\omega_8 = \neg x_2 \lor  \neg x_8 $ \\
%%$\omega_9 = \neg x_5 \lor  \neg x_8 $ \\
%%\vspace{1em}
%%$\omega_{10} = \neg x_3 \lor  \neg x_6 $ \\
%%$\omega_{11} = \neg x_3 \lor  \neg x_9 $ \\
%%$\omega_{12} = \neg x_6 \lor  \neg x_9 $ \\
%
%\end{frame}
%
%%% ----------------------------------------------------------------------------
%\begin{frame}
%\frametitle{Encoding the problem}
%\begin{columns}
%	\begin{column}{0.1\textwidth}
%		\small
%		$(A,1) (A,2) $\\
%		$(B,1) (B,2) $\\
%		$(C,1) (C,2) $\\
%		\vspace{1em}
%		$ \neg (A,1)  \neg (B,1)$\\
%		$ \neg (A,1)  \neg (C,1)$\\
%		$ \neg (B,1)  \neg (C,1)$\\
%		\vspace{1em}
%		$ \neg (A,2)  \neg (B,2)$\\
%		$ \neg (A,2)  \neg (C,2)$\\
%		$ \neg (B,2)  \neg (C,2)$\\
%	\end{column}
%	\begin{column}{0.2\textwidth}  %%<--- here
%		\small
%		$ x_1 \lor  x_2 $ \\
%		$x_3 \lor  x_4  $ \\
%		$x_5 \lor  x_6 $ \\
%		\vspace{1em}
%		$ \neg x_1 \lor  \neg x_3 $ \\
%		$ \neg x_1 \lor  \neg x_5 $ \\
%		$ \neg x_3 \lor  \neg x_5 $ \\
%		\vspace{1em}
%		$\neg x_2 \lor  \neg x_4 $ \\
%		$ \neg x_2 \lor  \neg x_6 $ \\
%		$ \neg x_4 \lor  \neg x_6 $ \\
%	\end{column}
%\end{columns}
%
%%$\omega_1 = x_1 \lor  x_2 \lor x_3 $ \\
%%$\omega_2 = x_4 \lor  x_5 \lor x_6 $ \\
%%$\omega_3 = x_7 \lor  x_8 \lor x_9 $ \\
%%\vspace{1em}
%%$\omega_4 = \neg x_1 \lor  \neg x_4 $ \\
%%$\omega_5 = \neg x_1 \lor  \neg x_7 $ \\
%%$\omega_6 = \neg x_4 \lor  \neg x_7 $ \\
%%\vspace{1em}
%%$\omega_7 = \neg x_2 \lor  \neg x_5 $ \\
%%$\omega_8 = \neg x_2 \lor  \neg x_8 $ \\
%%$\omega_9 = \neg x_5 \lor  \neg x_8 $ \\
%%\vspace{1em}
%%$\omega_{10} = \neg x_3 \lor  \neg x_6 $ \\
%%$\omega_{11} = \neg x_3 \lor  \neg x_9 $ \\
%%$\omega_{12} = \neg x_6 \lor  \neg x_9 $ \\
%\end{frame}
%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{SAT}
\centering
\begin{tikzpicture}
\tikzstyle{box} = [draw, minimum width=3.5cm,
				]
\tikzstyle{result} = [draw, minimum width=2.5cm, minimum height=1cm]

\node[box] (hlp) {High level problem};    
\node[box] (input) at ($(hlp) + (0pt, -50pt)$){Logic Formula};    

\node[box, line width=0.4mm, minimum width=10cm,minimum height=5cm,label={[fill=white,xshift=4.0cm, yshift=-0.3cm]SAT}]  at (0pt, -100pt){};
%\node<2->[draw, ellipse] (cnf) at ($(input) + (0pt, -10pt)$) {\scriptsize CNF};

\node[box] (solver) at ($(input) + (0pt, -30pt)$) {Solver};
%\node<3->[draw, ellipse] (cnf) at ($(solver) + (-25pt, -10pt)$) {\scriptsize DPLL};
%\node<3->[draw, ellipse] (cnf) at ($(solver) + (25pt, -10pt)$) {\scriptsize CDCL};

\node[result] (sat) at ($(solver) + (-70pt, -60pt)$) {Satisfiable ($\SAT$)};
\node[result] (unsat) at ($(solver) + (70pt, -60pt)$) {Unsatisfiable ($\UNSAT$)};

\visible<1>{\draw[->] (hlp) -> (input);}
\visible<2->{\draw[->] (hlp) -> node [midway, fill=white]{CNF} (input);}
\draw[->] (input) -> (solver);
\draw[->] (solver) -> node[midway,fill=white] {Assignment ($\alpha$)}  (sat);
\draw[->] (solver) -> node[midway,fill=white] {Proof}(unsat);
\end{tikzpicture}
\vfill
\begin{overlayarea}{\textwidth}{.2\textwidth}
	\vfill
	\visible<2->{CNF Representation:\\}
	\centering
\only<2>{
$\underbrace{(x_1 \lor x_2 \lor \neg x_3)}_{\text{Clause with literals } x_1, x_2, \neg x_3}$
}% visible 2

\vfill
\only<3>{
	$\overbrace{\underbrace{(x_1 \lor x_2 \lor \neg x_3)}_{Clause}\land (\neg x_1 \lor \neg x_2) \land (x_2 \lor \neg x_4)}^\text{Formula (CNF)}$
}% visible 3

\only<4>{
	\vspace{1em}
	$(x_1 \lor x_2 \lor \neg x_3) \rightarrow \{x_1 , x_2 , \neg x_3\}$
}
\end{overlayarea}

\end{frame}

%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{SAT Solving}

	Solving SAT formula is known to be \textbf{NP-complete}~\cite{cook1971complexity}
	\vfill
	Enumerative Algorithm:
	\begin{itemize}
		\item Davis, Putnam, Logemann, and Loveland (DPLL)~\cite{dpll_62}
		\begin{itemize}
			\item Boolean Constraint Propagation (BCP)
		\end{itemize}
		\item Conflict Driven Clause Learning (CDCL)~\cite{marques1999grasp}
		\begin{itemize}
			\item derived from DPLL
			\item clause learning
		\end{itemize}
	\end{itemize}
	
\end{frame}
%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{Conflict Driven Clause Learning (CDCL)}

\centering

\begin{tikzpicture}[scale=1,every node/.style={scale=0.6,fill=white, font=\sffamily}, align=center]
	% Specification of nodes (position, etc.)
	\tikzset{%	
		>={Latex[width=2mm,length=2mm]},
		% Specifications for style of nodes:
		base/.style = {rectangle, rounded corners, draw=black,
			minimum width=2cm, minimum height=1cm,
			text centered, font=\sffamily},
		question/.style = {base, diamond, fill=blue!15},
		question/.style = {base, diamond, fill=blue!15},
		unsat/.style = {base, fill=red!30,minimum width=3cm},
		sat/.style = {base, fill=green!30,minimum width=3cm},
		process/.style = {base, minimum width=2.5cm, fill=orange!25,
			font=\ttfamily},
		processcurr/.style = {process, thick, line width=0.7mm, draw=purple!80 },
		questioncurr/.style = {question,line width=0.7mm, draw=purple!80},
		line/.style = {->, thick },
		linecurr/.style = {line, line width=0.7mm, draw=purple!80},
	}
	\node (isfin) [question] {All vars\\ assign?};
	\node (dec)     [process, below = of isfin]          {Choose decision var};
	\node (sdec)     [right = of dec]          {};
	\node (idec) [left = of isfin]  {};
	\node (prop)    [process] at ($(dec) + (0pt, -30pt)$)          {Unit Propagation};
	\node (conf)    [question] at ($(prop) + (0pt, -50pt)$){ Is Conflict?};
	\node (confanalyse) [process, below = of conf] {Conflict Analysis};
	\node (learn) [process] at ($(prop) + (90pt, 0)$) {Learn conflict clause};
	\node (isend) [question] at ($(confanalyse) + (90pt, 0)$) {is level\\zero?};
	\node (end) [unsat] at ($(isend) + (90pt, 0)$) {$unsatiasfiable$};
	\node (ends) [sat] at ($(isfin.north east) + (+90pt, 0)$){$satisfiable$};
	
	\draw[line]     (sdec) -- (dec);
	\draw[line]     (dec) -- (prop);
	\draw[line]     (prop) -- (conf);
	\draw[line]     (conf) -| node [yshift=4.5 cm] {no}(idec.center) -- (isfin);
	\draw[line]     (conf) -- node {yes} (confanalyse);
	\draw[line]     (isfin) -- node {no}(dec);
	\draw[line]     (confanalyse) --(isend);
	\draw[line]     (isend) -- node {yes}(end);
	\draw[line]     (isfin.north east) -- node {yes}(ends);
	\draw[line]     (learn) -- (prop);
	\draw[line]     (isend) -- node [] {no}(learn);	
	\end{tikzpicture}

\end{frame}

%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{CDCL in action TODO}
%Present unit propagation + conflit (clause learning)

 \begin{columns}[t]
	\begin{column}[T]{.6\textwidth}
\begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
\newcommand{\x}{1}
\newcommand{\y}{-1.5}

\tikzstyle{inv} = [opacity=0]
\tikzstyle{visible} = [opacity=1]

\tikzstyle{textvisible} = [text opacity=1]

\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize,anchor=base, opacity=1]
\tikzstyle{propagation}=[rectangle, minimum height=.65cm, minimum width=.65cm,draw,thick,fill=blue!15,font=\scriptsize,anchor=base]
\tikzstyle{space}=[regular polygon, regular polygon sides=3, minimum height=1cm, anchor=base,xshift=-0.25cm,yshift=-0.25cm,
draw,thick,fill=blue!30,rotate=0,font=\scriptsize]
\tikzstyle{unsat}=[draw,thick,fill=red]
\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
\tikzstyle{trlink}=[link,nearly transparent]
\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
\tikzstyle{invmid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=0.0,font=\scriptsize]

% layer 1
\node[decision](t) at (0,0) {$x_1$};

% layer 2
\node[decision, inv, onslide={<3-7>, visible}](l) at (-\x,\y) {$x_6$};

\node[propagation, inv, onslide={<8>, visible}](l) at (-\x,\y) {$x_4$};
% \node[space](r) at (\x,\y) {};

% layer 3
\node[decision, inv, onslide={<4-7>, visible}](ll) at (-\x-\x*0.5,2*\y) {$x_5$};
%\node[decision](lr) at (-\x+\x*0.5,2*\y) {$x_3$};
%    \node[decision](rl) at (\x-\x*0.5,2*\y) {$x_3$};
%    \node[decision](rr) at (\x+\x*0.5,2*\y) {$x_3$};

% layer 4
\node[propagation, inv, onslide={<5-7>, visible}](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%\node[decision](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%    \node[decision](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%    \node[decision](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%    \node[decision](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%    \node[decision](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_4$};

% layer 5
%\node[unsat](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
\node[propagation, inv, onslide={<6-7>, visible}](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {$x_2$};
%\node[unsat](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 

%    \node[unsat](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%	\node[unsat](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%	\node[unsat](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%	\node[unsat](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%	\node[unsat](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%	\node[unsat](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%	\node[unsat](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%	\node[unsat](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 

\node[propagation, inv, onslide={<6-7>, visible}](lllrl) at (-\x-\x*0.5-\x*0.25,5*\y) {$x_3$};

\node[scale=1.5, inv, onslide={<7-7>, visible}](lllrl) at (-\x-\x*0.5-\x*0.25,5*\y) {\ko};

\draw[link, inv, onslide={<2->, visible}] (t) ->  node [invmid, onslide={<2->, textvisible}] {$0$} (l);
%	\draw[link] (t) -> node [mid] {$1$} (r.north);
\draw[link, inv, onslide={<3-7>, visible}] (l) ->  node [invmid, onslide={<3-7>, textvisible}] {$0$} (ll);
%\draw[link] (l) -> node [mid] {$1$} (lr);
%	\draw[link] (r) ->  node [mid] {$0$} (rl);
%	\draw[link] (r) -> node [mid] {$1$} (rr);

\draw[link, inv, onslide={<4-7>, visible}] (ll) -> node [invmid, onslide={<4-7>, textvisible}] {$0$} (lll);
%\draw[link] (ll) -> node [mid] {$1$} (llr);
%\draw[link] (lr) -> node [mid] {$0$} (lrl);
%\draw[link] (lr) -> node [mid] {$1$} (lrr);

%	\draw[link] (rl) -> node [mid] {$0$} (rll);
%	\draw[link] (rl) -> node [mid] {$1$} (rlr);
%	\draw[link] (rr) -> node [mid] {$0$} (rrl);
%	\draw[link] (rr) -> node [mid] {$1$} (rrr);


%\draw[link] (lll) -> node [mid] {$0$} (llll);
\draw[link, inv, onslide={<5-7>, visible}] (lll) -> node [invmid, onslide={<5-7>, textvisible}] {$1$} (lllr);

\draw[link, inv, onslide={<6-7>, visible}] (lllr) -> node [invmid, onslide={<6-7>, textvisible}] {$0$} (lllrl);

%\draw[link] (llr) -> node [mid] {$0$} (llrl);
%\draw[link] (llr) -> node [mid] {$1$} (llrr);
%\draw[link] (lrl) -> node [mid] {$0$} (lrll);
%\draw[link] (lrl) -> node [mid] {$1$} (lrlr);
%\draw[link] (lrr) -> node [mid] {$0$} (lrrl);
%\draw[link] (lrr) -> node [mid] {$1$} (lrrr);

%	\draw[link] (rll) -> node [mid] {$0$} (rlll);
%	\draw[link] (rll) -> node [mid] {$1$} (rllr);
%	\draw[link] (rlr) -> node [mid] {$0$} (rlrl);
%	\draw[link] (rlr) -> node [mid] {$1$} (rlrr);
%	\draw[link] (rrl) -> node [mid] {$0$} (rrll);
%	\draw[link] (rrl) -> node [mid] {$1$} (rrlr);
%	\draw[link] (rrr) -> node [mid] {$0$} (rrrl);
%	\draw[link] (rrr) -> node [mid] {$1$} (rrrr);
\end{tikzpicture}
\end{column}
\begin{column}[T]{.4\textwidth}

	\begin{tikzpicture}
	\tikzstyle{tr}=[text width=3cm, opacity=0]
	
	\node[text width=3cm] (a) {
		\smallskip
		$\omega_1 = \{x_1, x_2, x_3\}$ 
		\smallskip
		$\omega_2 = \{x_4, x_5, x_6\}$
		\smallskip
		$\omega_3 = \{\neg x_1, \neg x_5\}$
		\smallskip
		$\omega_4 = \{\neg x_2, \neg x_4\}$
		\smallskip
		$\omega_5 = \{\neg x_3, \neg x_4\}$
		\smallskip
		$\omega_6 = \{\neg x_3, \neg x_6\}$
	};
	
	\node[tr, onslide={<2>, opacity=1}] (a) {
		\smallskip
		$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
		\smallskip
		$\omega_2 = \{x_4, x_5, x_6\}$
		\smallskip
		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \neg x_5\}$
		\smallskip
		$\omega_4 = \{\neg x_2, \neg x_4\}$
		\smallskip
		$\omega_5 = \{\neg x_3, \neg x_4\}$
		\smallskip
		$\omega_6 = \{\neg x_3, \neg x_6\}$
	};

	\node[tr, onslide={<3>, opacity=1}] (a) {
				\smallskip
	$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
			\smallskip
	$\omega_2 = \{x_4, x_5, \cred{x_6\}}$
			\smallskip
	$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \neg x_5\}$
			\smallskip
	$\omega_4 = \{\neg x_2, \neg x_4\}$
			\smallskip
	$\omega_5 = \{\neg x_3, \neg x_4\}$
			\smallskip
	$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
};


	\node[tr, onslide={<4>, opacity=1}] (a) {
					\smallskip
	$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
				\smallskip
	$\omega_2 = \{\cprop{x_4}, \cred{x_5}, \cred{x_6\}}$
				\smallskip
	$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
				\smallskip
	$\omega_4 = \{\neg x_2, \neg x_4\}$
				\smallskip
	$\omega_5 = \{\neg x_3, \neg x_4\}$
				\smallskip
	$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
};


	\node[tr, onslide={<5>, opacity=1}] (a) {
						\smallskip
	$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
					\smallskip
	$\cgreen{\omega_2} = \{\cgreen{x_4}, \cred{x_5}, \cred{x_6\}}$
					\smallskip
	$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
					\smallskip
	$\omega_4 = \{\cprop{\neg x_2}, \cred{\neg x_4}\}$
					\smallskip
	$\omega_5 = \{\cprop{\neg x_3}, \cred{\neg x_4}\}$
					\smallskip
	$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
};

	\node[tr, onslide={<6-7>, opacity=1}] (a) {
						\smallskip
	$\omega_1 = \{\cred{x_1}, \cred{x_2}, \cblue{x_3}\}$ 
					\smallskip
	$\cgreen{\omega_2} = \{\cgreen{x_4}, \cred{x_5}, \cred{x_6\}}$
					\smallskip
	$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
					\smallskip
	$\cgreen{\omega_4} = \{\cgreen{\neg x_2}, \cred{\neg x_4}\}$
					\smallskip
	$\omega_5 = \{\cblue{\neg x_3}, \cred{\neg x_4}\}$
					\smallskip
	$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
};

	\node[tr, onslide={<8->, opacity=1}] (a)  at (0, -3) {
	$\omega_7 = \{x_1, \neg x_4\}$
};


	\end{tikzpicture}
	
%	\scriptsize
%	\begin{itemize} 
%	\item[] $\omega_{1} = \{x_1  ,  x_2  ,  x_3\}$
%	\item[] $\omega_{2} = \{x_4  ,  x_5  ,  x_6\} $
%	\item[] $\omega_{3} = \{x_7  ,  x_8  ,  x_9\} $
%	\item[] $\omega_{4} = \{\neg x_1  ,  \neg x_4\} $
%	\item[] $\omega_{5} = \{\neg x_1  ,  \neg x_7\} $
%	\item[] $\omega_{6} = \{\neg x_4  ,  \neg x_7\} $
%	\item[] $\omega_{7} = \{\neg x_2  ,  \neg x_5\} $
%	\item[] $\omega_{8} = \{\neg x_2  ,  \neg x_8\} $
%	\item[] $\omega_{9} = \{\neg x_5  ,  \neg x_8\} $
%	\item[] $\omega_{10} = \{\neg x_3  ,  \neg x_6\} $
%	\item[] $\omega_{11} = \{\neg x_3  ,  \neg x_9\} $
%	\item[] $\omega_{12} = \{\neg x_6  ,  \neg x_9) $
%	\end{itemize}
	\end{column}
\end{columns}
\end{frame}

%\begin{frame}
%	\begin{tikzpicture}[every node/.style={scale=0.59}, scale=0.59]
%	\node[text width=3cm] (a) {
%		$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
%		$\omega_2 = \{x_4, x_5, x_6\}$
%		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \neg x_5\}$
%		$\omega_4 = \{\neg x_2, \neg x_4\}$
%		$\omega_5 = \{\neg x_3, \neg x_4\}$
%		$\omega_6 = \{\neg x_3, \neg x_6\}$
%	};
%
%	\node[text width=3cm] (b) at ($(a) + (3.5, 0)$) {
%		$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
%		$\omega_2 = \{x_4, x_5, \cred{x_6\}}$
%		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \neg x_5\}$
%		$\omega_4 = \{\neg x_2, \neg x_4\}$
%		$\omega_5 = \{\neg x_3, \neg x_4\}$
%		$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
%	};
%
%	
%	\node[text width=3cm] (c) at ($(b) + (3.5, 0)$) {
%		$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
%		$\omega_2 = \{\cprop{x_4}, \cred{x_5}, \cred{x_6\}}$
%		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
%		$\omega_4 = \{\neg x_2, \neg x_4\}$
%		$\omega_5 = \{\neg x_3, \neg x_4\}$
%		$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
%	};
%
%	
%	\node[text width=3cm] (d) at ($(c) + (3.5, 0)$) {
%		$\omega_1 = \{\cred{x_1}, x_2, x_3\}$ 
%		$\cgreen{\omega_2} = \{\cgreen{x_4}, \cred{x_5}, \cred{x_6\}}$
%		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
%		$\omega_4 = \{\cprop{\neg x_2}, \cred{\neg x_4}\}$
%		$\omega_5 = \{\cprop{\neg x_3}, \cred{\neg x_4}\}$
%		$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
%	};
%
%
%	\node[text width=3cm] (e) at ($(d) + (3.5, 0)$) {
%		$\omega_1 = \{\cred{x_1}, \cred{x_2}, \cblue{x_3}\}$ 
%		$\cgreen{\omega_2} = \{\cgreen{x_4}, \cred{x_5}, \cred{x_6\}}$
%		$\cgreen{\omega_3} = \{\cgreen{\neg x_1}, \cgreen{\neg x_5\}}$
%		$\cgreen{\omega_4} = \{\cgreen{\neg x_2}, \cred{\neg x_4}\}$
%		$\omega_5 = \{\cblue{\neg x_3}, \cred{\neg x_4}\}$
%		$\cgreen{\omega_6} = \{\neg x_3, \cgreen{\neg x_6\}}$
%	};
%	\end{tikzpicture}
%\end{frame}

%% ----------------------------------------------------------------------------

\begin{frame}
\tikzstyle{every picture}+=[remember picture]
\frametitle{An UNSAT example}
\everymath{\displaystyle}
\centering

\begin{tabular}{cc}
	\includegraphics[scale=0.07]{images/room} & \includegraphics[scale=0.07]{images/room}\\
	\tikz[baseline]{\node[anchor=base] (r1){1};} & \tikz[baseline]{\node[anchor=base] (r2){2};}\\
\end{tabular}

\begin{tabular}{ccc}
	\tikz[baseline]{\node[anchor=base] (g1){};} & \tikz[baseline]{\node[anchor=base] (g2){};} & \tikz[baseline]{\node[anchor=base] (g3){};}\\
	\includegraphics[scale=0.1]{images/south} & \includegraphics[scale=0.1]{images/simpson} & \includegraphics[scale=0.09]{images/titeuf}\\
	A                                        & B                                           & C\\
\end{tabular}

\visible<2->{
	\begin{tikzpicture}[overlay]
	\tikzstyle{line} = [<-, line width=0.5mm];
	\path[line]<3> (r1) edge  (g1.south);
	\path[line]<3> (r2) edge  (g2.south);
	
	\path[line]<4> (r1) edge  (g2.south);
	\path[line]<4> (r2) edge  (g1.south);
	
	\path[line]<5> (r1) edge  (g1.south);
	\path[line]<5> (r2) edge  (g3.south);
	
	\path[line]<6> (r1) edge  (g3.south);
	\path[line]<6> (r2) edge  (g1.south);
	
	\path[line]<7> (r1) edge  (g2.south);
	\path[line]<7> (r2) edge  (g3.south);
	
	\path[line]<8> (r1) edge  (g3.south);
	\path[line]<8> (r2) edge  (g2.south);
	
	\visible<9>{
	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (-1.75, 4.25) {};
  	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (1.8, 4.25) {};
  	
	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (-3.5, 1.5) {};
	\node[draw, minimum width=3.1cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (0.25, 1.5) {};
	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (3.9, 1.5) {};
	}
	\end{tikzpicture}
}

\vfill
Is it possible to attribute each group to a classroom?
\begin{center}
	\visible<8->{No!}
	\vfill
	\visible<9->{Presence of symmetries hinders the performance of the solver}
\end{center}

\end{frame}

%% ----------------------------------------------------------------------------

\begin{frame}
	\frametitle{Outline}
	\begin{enumerate}
		\item \textcolor{UPMCEngagementBlueB}{SAT overview}
		\begin{itemize}
			\item[] SAT basics
			\item[] SAT and symmetries
		\end{itemize}
		\vspace{5pt}
		\item \textcolor{UPMCEngagementBlueB}{Existing approaches}
		\begin{itemize}
			\item[] Static symmetry breaking
			\item[] Dynamic symmetry breaking
		\end{itemize}
		\vspace{5pt}
		\item \textcolor{UPMCEngagementBlueB}{Contribution and results} 
		\begin{itemize}
			\item[] \phantom{CDCL [Sym]}
			\item[] \phantom{Combination of different approaches}
		\end{itemize}
	\end{enumerate}
\end{frame}

%% ----------------------------------------------------------------------------
\tikzstyle{every picture}+=[remember picture]
\begin{frame}
\everymath{\displaystyle}

	\frametitle{Symmetry}
	\scriptsize
	\mbox{$g$ = \bigg(\begin{tabular}{ccccccccc}
		$x_1$ & $x_2$ & $x_3$ & $x_4$ & $x_5$ & $x_6$ & $x_7$ & $x_8$ & $x_9$\\
		$x_2$ & $x_1$ & $x_3$ & $x_5$ & $x_4$ & $x_6$ & $x_8$ & $x_7$ & $x_9$ 
	\end{tabular}\bigg)}\hfill $\rightarrow$\hfill
	$(x_1 \enskip x_2)(x_4 \enskip x_5)(x_7 \enskip x_8) $\\
	%(\neg x_1 \neg x_2)(\neg x_4 \neg x_5)(\neg x_7 \neg x_8)$\\
	\vfill
	 \begin{columns}[t]
		\begin{column}[T]{.3\textwidth}
		\tiny
		\begin{itemize} 
		\item[] $\omega_{1} = \{x_1  ,  x_2  ,  x_3\} \tikz[baseline]{\node[anchor=base] (a1){};}$
		\item[] $\omega_{2} = \{x_4  ,  x_5  ,  x_6\} \tikz[baseline]{\node[anchor=base] (a2){};}$
		\item[] $\omega_{3} = \{x_7  ,  x_8  ,  x_9\} \tikz[baseline]{\node[anchor=base] (a3){};}$
		\item[] $\omega_{4} = \{\neg x_1  ,  \neg x_4\} \tikz[baseline]{\node[anchor=base] (a4){};}$
		\item[] $\omega_{5} = \{\neg x_1  ,  \neg x_7\} \tikz[baseline]{\node[anchor=base] (a5){};}$
		\item[] $\omega_{6} = \{\neg x_4  ,  \neg x_7\} \tikz[baseline]{\node[anchor=base] (a6){};}$
		\item[] $\omega_{7} = \{\neg x_2  ,  \neg x_5\} \tikz[baseline]{\node[anchor=base] (a7){};}$
		\item[] $\omega_{8} = \{\neg x_2  ,  \neg x_8\} \tikz[baseline]{\node[anchor=base] (a8){};}$
		\item[] $\omega_{9} = \{\neg x_5  ,  \neg x_8\} \tikz[baseline]{\node[anchor=base] (a9){};}$
		\item[] $\omega_{10} = \{\neg x_3  ,  \neg x_6\} \tikz[baseline]{\node[anchor=base] (a10){};}$
		\item[] $\omega_{11} = \{\neg x_3  ,  \neg x_9\} \tikz[baseline]{\node[anchor=base] (a11){};}$
		\item[] $\omega_{12} = \{\neg x_6  ,  \neg x_9\} \tikz[baseline]{\node[anchor=base] (a12){};}$
		\end{itemize}
		\end{column}
		\begin{column}[T]{.3\textwidth}
		\tiny
		\begin{itemize} 
		\item[] $\tikz[baseline]{\node[anchor=base] (b1){};} \omega_{1} = \{x_2  ,  x_1  ,  x_3\}$
		\item[] $\tikz[baseline]{\node[anchor=base] (b2){};} \omega_{2} = \{x_5  ,  x_4  ,  x_6\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b3){};} \omega_{3} = \{x_8  ,  x_7  ,  x_9\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b4){};} \omega_{7} = \{\neg x_2  ,  \neg x_5\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b5){};} \omega_{8} = \{\neg x_2  ,  \neg x_8\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b6){};} \omega_{9} = \{\neg x_5  ,  \neg x_8\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b7){};} \omega_{4} = \{\neg x_1  ,  \neg x_4\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b8){};} \omega_{5} = \{\neg x_1  ,  \neg x_7\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b9){};} \omega_{6} = \{\neg x_4  ,  \neg x_7\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b10){};} \omega_{10} = \{\neg x_3  ,  \neg x_6\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b11){};} \omega_{11} = \{\neg x_3  ,  \neg x_9\} $
		\item[] $\tikz[baseline]{\node[anchor=base] (b12){};} \omega_{12} = \{\neg x_6  ,  \neg x_9\} $
	\end{itemize}
	\end{column}
\end{columns}

\begin{tikzpicture}[overlay]
\tikzstyle{line} = [<->];
\path[line] (a1) edge  (b1);
\path[line] (a2) edge  (b2);
\path[line] (a3) edge  (b3);
\path[line] (a4) edge  (b7);
\path[line] (a5) edge  (b8);
\path[line] (a6) edge  (b9);
\path[line] (a7) edge  (b4);
\path[line] (a8) edge  (b5);
\path[line] (a9) edge  (b6);
\path[line] (a10) edge  (b10);
\path[line] (a11) edge  (b11);
\path[line] (a12) edge  (b12);

\end{tikzpicture}
%	Symmetry of formula:
\vfill
\normalsize
	A symmetry (permuation) $g$ is a bijective function (on variables) that leaves $\varphi$ invariant.
%	
%	\vfill
%	Equi-satisfiability
%	Let $\alpha$ an assignment, $\varphi$ a SAT problem and $g$ a symmetry:
%	$\alpha \models \varphi \Leftrightarrow g.\alpha \models \varphi$
	
	\vfill
\end{frame}

\begin{frame}
	\frametitle{Computing symmetries of a SAT problem}
	% \setlength{\tabcolsep}{35pt}
	
	\newcolumntype{C}{ >{\centering\arraybackslash} m{5cm} }
	\newcolumntype{D}{ >{\centering\arraybackslash} m{1cm} }
	\begin{tabular}{CC}
		$CNF\ formula$ &{\scriptsize
			\begin{tabular}{c}
				$(x_1 \lor x_2 \lor x_3) \land
				(x_4 \lor x_5 \lor x_6) \land
				(x_7 \lor x_8 \lor x_9) $\\
				$\land (\neg x_1 \lor \neg x_4) \land
				(\neg x_1 \lor \neg x_7) \land
				(\neg x_4 \lor \neg x_7)$\\
				$\land (\neg x_2 \lor \neg x_5) \land
				(\neg x_2 \lor \neg x_8) \land
				(\neg x_5 \lor \neg x_8)$ \\
				$\land (\neg x_3 \lor \neg x_6) \land
				(\neg x_3 \lor \neg x_9) \land
				(\neg x_6 \lor \neg x_9)$\\
		\end{tabular}}\\
		\only<2> {
			
			$\Downarrow$ & $\Downarrow$  \\
			
			colored graph & 
			\includegraphics[scale=0.1]{images/graph}\\ \\
		}
		
		\visible<3-> {
			
			$\Downarrow$ & $\Downarrow$  \\
			
			colored graph & 
			\includegraphics[scale=0.05]{images/graph}\\ \\
		}
		\visible<3-> {
			$\|$ & $\|$  \\
			graph automorphism & 
			\small{(\texttt{bliss} \footnote{http://www.tcs.hut.fi/Software/bliss/} or 
				\texttt{saucy} \footnote{http://vlsicad.eecs.umich.edu/BK/SAUCY/})} 
			\\
		}
		
		
		\visible<4-> {
			$\Downarrow$ & $\Downarrow$  \\
			
			set of symmetries & %\begin{frame}
			%\tikzstyle{every picture}+=[remember picture]
			%\frametitle{An UNSAT example}
			%\everymath{\displaystyle}
			%\centering
			%
			%\begin{tabular}{cc}
			%	\includegraphics[scale=0.07]{images/room} & \includegraphics[scale=0.07]{images/room}\\
			%	\tikz[baseline]{\node[anchor=base] (r1){1};} & \tikz[baseline]{\node[anchor=base] (r2){2};}\\
			%\end{tabular}
			%
			%\begin{tabular}{ccc}
			%	\tikz[baseline]{\node[anchor=base] (g1){};} & \tikz[baseline]{\node[anchor=base] (g2){};} & \tikz[baseline]{\node[anchor=base] (g3){};}\\
			%	\includegraphics[scale=0.1]{images/south} & \includegraphics[scale=0.1]{images/simpson} & \includegraphics[scale=0.09]{images/titeuf}\\
			%	A                                        & B                                           & C\\
			%\end{tabular}
			%
			%\visible<2->{
			%	\begin{tikzpicture}[overlay]
			%	\tikzstyle{line} = [<-, line width=0.5mm];
			%	\path[line]<3> (r1) edge  (g1.south);
			%	\path[line]<3> (r2) edge  (g2.south);
			%	
			%	\path[line]<4> (r1) edge  (g2.south);
			%	\path[line]<4> (r2) edge  (g1.south);
			%	
			%	\path[line]<5> (r1) edge  (g1.south);
			%	\path[line]<5> (r2) edge  (g3.south);
			%	
			%	\path[line]<6> (r1) edge  (g3.south);
			%	\path[line]<6> (r2) edge  (g1.south);
			%	
			%	\path[line]<7> (r1) edge  (g2.south);
			%	\path[line]<7> (r2) edge  (g3.south);
			%	
			%	\path[line]<8> (r1) edge  (g3.south);
			%	\path[line]<8> (r2) edge  (g2.south);
			%	
			%	\visible<9>{
			%	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (-1.75, 4.25) {};
			%  	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (1.8, 4.25) {};
			%  	
			%	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (-3.5, 1.5) {};
			%	\node[draw, minimum width=3.1cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (0.25, 1.5) {};
			%	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (3.9, 1.5) {};
			%	}
			%	\end{tikzpicture}
			%}
			%
			%\vfill
			%Is it possible to attribute each group to a classroom?\\
			%\begin{center}
			%	\visible<8->{No!}
			%\end{center}
			%
			%\end{frame}
			\scriptsize
			\begin{tabular}{c}
				$g_1 = (x_2 \enspace x_3)(x_5 \enspace x_6)(x_8 \enspace x_9)$\\
				$g_2 = (x_4 \enspace x_7)(x_5 \enspace x_8)(x_6 \enspace x_9)$\\
				$g_3 = (x_1 \enspace x_2)(x_4 \enspace x_5)(x_7 \enspace x_8)$\\
				$g_4 = (x_1 \enspace x_4)(x_2 \enspace x_5)(x_3 \enspace x_6)$
			\end{tabular}
		}
	\end{tabular}
\end{frame}

%% ----------------------------------------------------------------------------
\begin{frame}
	\frametitle{Using symmetries to prune search space}
	\centering
	\begin{tikzpicture}[scale=1, every node/.style={scale=1}]
	
	\newcommand{\x}{2.07}
	\newcommand{\y}{-1.5}
	\tikzstyle{highlight} = [line width=0.3mm, color=blue]
	\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize]
%	\tikzstyle{unsat}=[draw,thick, fill=red]
	\tikzstyle{unsat}=[scale=2, fill=white]
	\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
	\tikzstyle{transparent} = [nearly transparent]
	\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
	\tikzstyle{trmid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=0.3,font=\scriptsize]
	
	% layer 1
	\node[decision](t) at (0,0) {$x_1$};
	
	% layer 2
	\node[decision](l) at (-\x,\y) {$x_2$};
	\node[decision](r) at (\x,\y) {$x_2$};
	
	\visible<2>{\node[highlight, scale=2](equiv) at (0,\y) {$\leftrightarrow$};}
	
	% layer 3
	\node[decision](ll) at (-\x-\x*0.5,2*\y) {$x_4$};
	\node[decision](lr) at (-\x+\x*0.5,2*\y) {$x_4$};
	\node[decision,onslide={<2>, transparent}](rl) at (\x-\x*0.5,2*\y) {$x_4$};
	\node[decision](rr) at (\x+\x*0.5,2*\y) {$x_4$};
	
	% layer 4
	\node[decision](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
	\node[decision](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_5$};
	\node[decision](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_5$};
	\node[decision](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_5$};
	\node[decision,onslide={<2>, transparent}](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
	\node[decision,onslide={<2>, transparent}](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_5$};
	\node[decision](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_5$};
	\node[decision](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_5$};
	
	% layer 5
	\node[unsat](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}}; 
	\node[unsat,onslide={<2>, transparent}](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat,onslide={<2>, transparent}](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat,onslide={<2>, transparent}](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat,onslide={<2>, transparent}](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
	\node[unsat](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}}; 
	
	
	\draw[link, onslide={<2>, highlight}] (t) ->  node [mid] {$0$} (l);
	\draw[link, onslide={<2>, highlight}] (t) -> node [mid] {$1$} (r);
	
	\draw[link] (l) ->  node [mid] {$0$} (ll);
	\draw[link,onslide={<2>, highlight}] (l) -> node [mid] {$1$} (lr);
	\draw[link,onslide={<2>, highlight}] (r) ->  node [mid] {$0$} (rl);
	\draw[link] (r) -> node [mid] {$1$} (rr);
	
	\draw[link] (ll) -> node [mid] {$0$} (lll);
	\draw[link] (ll) -> node [mid] {$1$} (llr);
	\draw[link] (lr) -> node [mid] {$0$} (lrl);
	\draw[link] (lr) -> node [mid] {$1$} (lrr);
	
	\draw[link,onslide={<2>, transparent}] (rl) -> node [mid,onslide={<2>, trmid}] {$0$} (rll);
	\draw[link,onslide={<2>, transparent}] (rl) -> node [mid,onslide={<2>, trmid}] {$1$} (rlr);
	\draw[link] (rr) -> node [mid] {$0$} (rrl);
	\draw[link] (rr) -> node [mid] {$1$} (rrr);
	
	
	\draw[link] (lll) -> node [mid] {$0$} (llll);
	\draw[link] (lll) -> node [mid] {$1$} (lllr);
	\draw[link] (llr) -> node [mid] {$0$} (llrl);
	\draw[link] (llr) -> node [mid] {$1$} (llrr);
	\draw[link] (lrl) -> node [mid] {$0$} (lrll);
	\draw[link] (lrl) -> node [mid] {$1$} (lrlr);
	\draw[link] (lrr) -> node [mid] {$0$} (lrrl);
	\draw[link] (lrr) -> node [mid] {$1$} (lrrr);
	
	\draw[link,onslide={<2>, transparent}] (rll) -> node [mid,onslide={<2>, trmid}] {$0$} (rlll);
	\draw[link,onslide={<2>, transparent}] (rll) -> node [mid,onslide={<2>, trmid}] {$1$} (rllr);
	\draw[link,onslide={<2>, transparent}] (rlr) -> node [mid,onslide={<2>, trmid}] {$0$} (rlrl);
	\draw[link,onslide={<2>, transparent}] (rlr) -> node [mid,onslide={<2>, trmid}] {$1$} (rlrr);
	\draw[link] (rrl) -> node [mid] {$0$} (rrll);
	\draw[link] (rrl) -> node [mid] {$1$} (rrlr);
	\draw[link] (rrr) -> node [mid] {$0$} (rrrl);
	\draw[link] (rrr) -> node [mid] {$1$} (rrrr);
	\end{tikzpicture}
	\vfill
\visible<2> {Adds additional constraints to prune search space.}
\end{frame}
 
\begin{frame}
	\frametitle{Generates symmetry breaking predicates (SBP)}
\begin{itemize}
	\item Define lexicographic order
	\begin{itemize}
		\item Define total order on variables
		\item Define minimal value
	\end{itemize}
	\item Forbid non minimal assignment with addition of SBP
\end{itemize}	

	\vfill
	Example:\\
	\begin{itemize}
		\item[]	$x_1 \leq x_2 \leq x_3  \leq x_4 \leq x_5 \leq x_6 \leq x_7 \leq x_8 ;  \false < \true$ 
		\item[] 	$g = (x_1 \enskip x_2)(x_4 \enskip x_5)(x_7 \enskip x_8) $\\
	\end{itemize}

	\vfill
	\begin{tabular} {ll}
		 $x_1 \leq x_2$	& $x_1 \lor \neg x_2$\\
		 \hline
		 $x_1 = x_2 \rightarrow x_4 \leq x_5$ &  $ x_1 \lor x_2 \lor x_4 \lor \neg x_5 $\\
		 									  &  $ \neg  x_1 \lor \neg x_2 \lor x_4 \lor \neg x_5 $\\
		 									  \hline 
		 $x_1 = x_2 \land x_4 = x_5 \rightarrow x_8 \leq x_3$ & $ x_1 \lor x_2 \lor x_4 \lor x_5 \lor x_7 \lor \neg x_8 $\\
		 													  & $ \neg x_1 \lor  \neg x_2 \lor x_4 \lor x_5 \lor x_7 \lor \neg x_8 $\\
		 													  & $\cdots$
	\end{tabular}
	
%	TODO\\
%	
%	Tree example with hide symmetric search space\\
%	
%	Easy to use, no modification of the solver \\
%	
%	Inject additional constraints to the problem symmetry breaking predicates sbp\\
%	
%Different tools Shatter, BreakID

\end{frame}



%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{Static symmetry breaking}
\begin{center}
	

\begin{tikzpicture}
	\tikzstyle{box} = [draw, minimum width=1.5cm]
	
	\node[box,minimum height=1.2cm] (cnf) {CNF};
	\node[box] (sym) at (-3, -1) { Symmetries};
	\node[box,minimum height=1.2cm] (sbp) at (0, -2) { SBPs};
	
	\node[box, minimum height=3.5cm, minimum width=2cm, line width=0.5mm, opacity=0,onslide={<2->, opacity=1}] at (0, -1) (full) {$\land$};
	\node[box,minimum height=1.2cm, opacity=0, onslide={<2->,opacity=1}] (solver) at (3, -1) { SAT solver};
	
	\draw[->, thick, bend left = 30] (cnf) to [bend right=30] node [midway, left, fill=white] {compute symmetries} (sym);
	\draw[->, thick, bend left = 30] (sym) to [bend right=30] node [midway, left, fill=white] {generates SBPs} (sbp);
	
	\draw[->, thick, opacity=0, onslide={<2->,opacity=1}] (full) to [] (solver);
\end{tikzpicture}
\end{center}
\vfill
\begin{itemize}
	\item<3-> \textcolor{hgreen}{Works well on many symmetric instances}
	\vfill
	\item<3-> \textcolor{red}{The solver can "explode" instead of being helped}
\end{itemize}
\end{frame}

%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{Using symmetries to accelerate tree traversal}

\centering
\begin{tikzpicture}[scale=1, every node/.style={scale=1}]

\newcommand{\x}{2.07}
\newcommand{\y}{-1.5}
\tikzstyle{highlight} = [line width=0.3mm, color=blue]
\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize]
%	\tikzstyle{unsat}=[draw,thick, fill=red]
\tikzstyle{unsat}=[scale=2, fill=white]
\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
\tikzstyle{transparent} = [nearly transparent]
\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
\tikzstyle{trmid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=0.3,font=\scriptsize]
\tikzstyle{propagation}=[rectangle, minimum height=.65cm, minimum width=.65cm,draw,thick,fill=blue!15,font=\scriptsize,anchor=base]

% layer 1
\node[decision](t) at (0,0) {$x_1$};

% layer 2
\node[decision,transparent,onslide={<2->,opacity=1}](l) at (-\x,\y) {$x_2$};
\node[decision,transparent](r) at (\x,\y) {$x_2$};


% layer 3
\node[decision,transparent](ll) at (-\x-\x*0.5,2*\y) {$x_4$};
\node[propagation,transparent,onslide={<2->,opacity=1}](lr) at (-\x+\x*0.5,2*\y) {$x_4$};
\node[decision,transparent](rl) at (\x-\x*0.5,2*\y) {$x_4$};
\node[decision,transparent](rr) at (\x+\x*0.5,2*\y) {$x_4$};

% layer 4
\node[decision,transparent](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_5$};
\node[decision,transparent,onslide={<3>, propagation,fill=red!30,opacity=1}](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_5$};
\node[decision,transparent](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_5$};

% layer 5
\node[unsat,transparent](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}}; 
\node[unsat,transparent](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {\pgfuseplotmark{triangle}};
\node[unsat,transparent](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {\pgfuseplotmark{triangle}}; 


\draw[link] (t) ->  node [mid] {$0$} (l);
\draw[link,transparent] (t) -> node [trmid] {$1$} (r);

\draw[link,transparent] (l) ->  node [trmid] {$0$} (ll);
\draw[link,transparent,onslide={<2->,opacity=1}] (l) -> node [trmid,onslide={<2->,mid}] {$1$} (lr);
\draw[link,transparent] (r) ->  node [trmid] {$0$} (rl);
\draw[link,transparent] (r) -> node [trmid] {$1$} (rr);

\draw[link,transparent] (ll) -> node [trmid] {$0$} (lll);
\draw[link,transparent] (ll) -> node [trmid] {$1$} (llr);
\draw[link,transparent,onslide={<2->,opacity=1}] (lr) -> node [trmid,onslide={<2->,mid}] {$0$} (lrl);
\draw[link,transparent] (lr) -> node [trmid] {$1$} (lrr);

\draw[link,transparent] (rl) -> node [trmid] {$0$} (rll);
\draw[link,transparent] (rl) -> node [trmid] {$1$} (rlr);
\draw[link,transparent] (rr) -> node [trmid] {$0$} (rrl);
\draw[link,transparent] (rr) -> node [trmid] {$1$} (rrr);


\draw[link,transparent] (lll) -> node [trmid] {$0$} (llll);
\draw[link,transparent] (lll) -> node [trmid] {$1$} (lllr);
\draw[link,transparent] (llr) -> node [trmid] {$0$} (llrl);
\draw[link,transparent] (llr) -> node [trmid] {$1$} (llrr);
\draw[link,transparent,onslide={<3->,opacity=1}] (lrl) -> node [trmid,onslide={<3->,mid}] {$0$} (lrll);
\draw[link,transparent] (lrl) -> node [trmid] {$1$} (lrlr);
\draw[link,transparent] (lrr) -> node [trmid] {$0$} (lrrl);
\draw[link,transparent] (lrr) -> node [trmid] {$1$} (lrrr);

\draw[link,transparent] (rll) -> node [trmid] {$0$} (rlll);
\draw[link,transparent] (rll) -> node [trmid] {$1$} (rllr);
\draw[link,transparent] (rlr) -> node [trmid] {$0$} (rlrl);
\draw[link,transparent] (rlr) -> node [trmid] {$1$} (rlrr);
\draw[link,transparent] (rrl) -> node [trmid] {$0$} (rrll);
\draw[link,transparent] (rrl) -> node [trmid] {$1$} (rrlr);
\draw[link,transparent] (rrr) -> node [trmid] {$0$} (rrrl);
\draw[link,transparent] (rrr) -> node [trmid] {$1$} (rrrr);
\end{tikzpicture}
\vfill
\visible<3> {Use symmetries to deduce symmetrical facts.}
\end{frame}



\begin{frame}
\frametitle{Dynamic Symmetry Breaking}

\begin{itemize}
	\item Accelerate SAT engine using symmetry properties
	\item 
\end{itemize}

Modify solver behavior to accelerate tree traversal 

modify solver \\

Different tools SP, SLS, SEL, ...
\end{frame}
%% ----------------------------------------------------------------------------
\begin{frame}
\frametitle{Symmetry Propagation}
TODO\\
Present SP
\end{frame}
%% ---------

\begin{frame}
\frametitle{Example}
TODO\\
Build an example
\end{frame}
%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{Outline}
\begin{enumerate}
	\item \textcolor{UPMCEngagementBlueB}{SAT overview}
	\begin{itemize}
		\item[] SAT basics
		\item[] SAT and symmetries
	\end{itemize}
	\vspace{5pt}
	\item \textcolor{UPMCEngagementBlueB}{Existing approaches}
	\begin{itemize}
		\item[] Static symmetry breaking
		\item[] Dynamic symmetry breaking
	\end{itemize}
	\vspace{5pt}
	\item \textcolor{UPMCEngagementBlueB}{Contribution and results} 
	\begin{itemize}
		\item[] CDCL [Sym]
		\item[] Combination of different approaches
	\end{itemize}
\end{enumerate}
\end{frame}

%% ----------------------------------------------------------------------------
%\begin{frame}
%\frametitle{Our contribution CDCL[Sym]}
%
%Tackling the explosion problem in the static symmetry breaking approaches.
%
%
%Compute and inject ESBP \textcolor{hgreen}{opportunistically} during the solving\\
%
%\end{frame}
%


%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{Our contribution CDCL[Sym]}

\centering

\begin{tikzpicture}[scale=0.9,every node/.style={scale=0.5,fill=white, font=\sffamily}, align=center]
% Specification of nodes (position, etc.)
\tikzset{%	
	>={Latex[width=2mm,length=2mm]},
	% Specifications for style of nodes:
	base/.style = {rectangle, rounded corners, draw=black,
		minimum width=2cm, minimum height=1cm,
		text centered, font=\sffamily},
	question/.style = {base, diamond, fill=blue!15},
	question/.style = {base, diamond, fill=blue!15},
	unsat/.style = {base, fill=red!30,minimum width=3cm},
	sat/.style = {base, fill=green!30,minimum width=3cm},
	process/.style = {base, minimum width=2.5cm, fill=orange!25,
		font=\ttfamily},
	processcurr/.style = {process, thick, line width=0.7mm, draw=purple!80 },
	questioncurr/.style = {question,line width=0.7mm, draw=purple!80},
	line/.style = {->, thick },
	linecurr/.style = {line, line width=0.7mm, draw=purple!80},
}

\node (isfin) [question] {All vars\\ assign?};
\node (dec)     [process, below = of isfin]          {Choose decision var};
\node (sdec)     [right = of dec]          {};
\node (idec) [left = of isfin]  {};
\node (prop)    [process] at ($(dec) + (0pt, -30pt)$)          {Unit Propagation};


\node (conf)    [question] at ($(prop) + (0pt, -50pt)$){ Is Conflict?};
\node (confanalyse) [process, below = of conf] {Conflict Analysis};
\node (learn) [process] at ($(prop) + (90pt, 0)$) {Learn conflict clause};
\node (isend) [question] at ($(confanalyse) + (90pt, 0)$) {is level\\zero?};
\node (end) [unsat] at ($(isend) + (90pt, 0)$) {$unsatiasfiable$};
\node (ends) [sat] at ($(isfin.north east) + (+90pt, 0)$){$satisfiable$};

\node[opacity=0,onslide={<2>,opacity=1},draw, rounded corners=4pt,draw=blue, line width=0.4mm, minimum width=4cm,minimum height=7cm,label={[opacity=0,onslide={<2>,opacity=1},fill=white,xshift=-1.0cm, yshift=-7.5cm]\textcolor{blue}{Symmetry controller}}]  at (-90pt, -160pt){};
\node (ismin)  [question,opacity=0,onslide={<2>,opacity=1}] at ($(conf) + (-90pt, 0pt)$)  {Is assignment\\minimal?};
\node (genesbp)  [process,opacity=0,onslide={<2>,opacity=1}] at ($(confanalyse) + (-90pt, 0pt)$)  {Generate ESBP};



\draw[line]     (sdec) -- (dec);
\draw[line]     (dec) -- (prop);
\draw[line]     (prop) -- (conf);
\draw[line,opacity=1,onslide={<2>,opacity=0}]     (conf) -| node [yshift=4.5 cm] {no}(idec.center) -- (isfin);

\draw[line]     (conf) -- node {yes} (confanalyse);
\draw[line]     (isfin) -- node {no}(dec);
\draw[line]     (confanalyse) --(isend);
\draw[line]     (isend) -- node {yes}(end);
\draw[line]     (isfin.north east) -- node {yes}(ends);
\draw[line]     (learn) -- (prop);
\draw[line]     (isend) -- node [] {no}(learn);	

\draw[line,opacity=0,onslide={<2>,opacity=1}]     (ismin) |- node [] {yes}(idec.center) -- (isfin);
\draw[line,opacity=0,onslide={<2>,opacity=1}]     (ismin) -- node [] {no} (genesbp);	
\draw[line,opacity=0,onslide={<2>,opacity=1}]     (conf) -- node [] {no} (ismin);	
\draw[line,opacity=0,onslide={<2>,opacity=1}]     (genesbp) -- (confanalyse);

\end{tikzpicture}

\end{frame}
%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{Symmetry status}

\begin{itemize}
	\item \texttt{reducer}: $g.\alpha. \prec \alpha$
	\item \texttt{inactive} : $\alpha \prec g.\alpha$
	\item \texttt{active} : \textit{not enough information}
\end{itemize}

\vfill

\begin{block}{Efficient implementation of symmetry status}

\centering 	Keep track the smallest unassigned variable $x$ :

\vfill

	\begin{enumerate}
		\item $\alpha(g.x) \leq \alpha(x),$ \small then $g$ is \texttt{reducer}
		$\Rightarrow$ Effective SBP (ESBP)
		\item $ \alpha(x) \leq \alpha(g.x),$ then $g$ is \texttt{inactive}
		$\Rightarrow g$ cannot reduce $\alpha$
		\item $\alpha(g.x)$ or $\alpha(x)$ is unassigned then $g$ is
		\texttt{active}
	\end{enumerate}
\end{block}  
\vspace{2em}

Update whenever variables are assigned / unassigned
\end{frame}
%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{Example}
{\scriptsize
\begin{enumerate}
	\item \texttt{reducer}: $\alpha(g.x) \leq \alpha(x)$

	\item \texttt{inactive}: $ \alpha(x) \leq \alpha(g.x)$

	\item \texttt{active}: $\alpha(g.x)$ or $\alpha(x)$ is unassigned
\end{enumerate}
}
\vfill
	$x_1 \leq x_2 \leq x_3  \leq x_4 \leq x_5 \leq x_6 \leq x_7 \leq x_8  \enspace ; \enspace  \false < \true$ 
	
%	$(x_1 \enskip x_2)(x_4 \enskip x_5)(x_7 \enskip x_8) $\\
 %                 	$g_1 = (x_2 \enspace x_3)(x_5 \enspace x_6)(x_8 \enspace x_9)$\\
                  	
 \vfill 
 	
 \begin{tabular}{lllllll|ll}
      	$g_1$ =  & ($\only<1>{x_2}\only<2->{\textcolor{red}{x_2}} $ & $\only<1-2>{x_3}\only<3->{\textcolor{red}{x_3}}) $ & $ (x_5 $ & $ x_6)$ & $ (x_8 $ & $ x_9)$ & $x = \only<1>{x_2}\only<2>{\textcolor{red}{x_2}}\only<3->{x_5}$ & $g.x = \only<1-2>{x_3}\only<3->{\textcolor{black}{x_6}} $	\\
      	& $\only<1-2>{\enspace \uparrow}$&  & $\only<3->{\enspace \uparrow}$&  & & & & \texttt{active}
 \end{tabular}  

\vspace{1em}         
 \begin{tabular}{lllllll|ll}
	$g_2$ =  & ($\only<1-2>{x_1}\only<3->{\textcolor{hgreen}{x_1}} $ & $\only<1>{x_2}\only<2->{\textcolor{red}{x_2}}) $ & $ (x_4 $ & $ x_5)$ & $ (x_7 $ & $ x_8)$&
	 $x = \only<1-2>{x_1}\only<3->{\textcolor{hgreen}{x_1}}$ & $g.x = \only<1>{x_2}\only<2->{\textcolor{red}{x_2}} $	\\
	& $\enspace \uparrow$ & & &  & &  &&  \only<1-2>{\texttt{active}}\only<3->{\texttt{reducer}}
\end{tabular}




\hspace{8em}$\cdots $
\vfill
\centering 

\only<1>{$\alpha = \{ \phantom{\neg x_2,\neg x_3, x_1} \}$}%
\only<2>{$\alpha = \{ \neg x_2 \phantom{,\neg x_3, x_1} \}$}%
\only<3->{$\alpha = \{ \neg x_2, \neg x_3, x_1 \}$}

\vspace{1em}

\only<1-3>{ \phantom{$g_2$ generates $\omega = \{ \neg x_1, x_2 \}$ }}
\only<4>{ $g_2$ generates $\omega = \{ \neg x_1, x_2 \}$ }
	\end{frame}
%% ----------------------------------------------------------------------------

\begin{frame}{Experiments: benchmark}

Benchmark:
\begin{itemize}
	\item from SAT contests 2012 -- 2017,
	\item retain only instances for which \bliss{} finds significant symmetries in $1000$s,
	\item $1350$ symmetric instances (out of $3700$)
\end{itemize}

Setup:
\begin{itemize}
	\item four tools
	\begin{itemize}
		\item MiniSat (no symmetry, baseline)
		\item MiniSat + breakID (state-of-the-art symmetry SAT solver)
		\item MiniSat + Shatter (state-of-the-art symmetry SAT solver)
		\item \textbf{MiniSym} = MiniSat + CDCLSym (our approach)
	\end{itemize}
	\item $5000$s timeout, $8$GB memory,
	\item includes time to compute symmetries (except for MiniSat)
\end{itemize}

\end{frame}
%----------------------------------------------------------------------------
\begin{frame}{Experimental results}
\begin{block}{}
\centering 	$\bliss$ gives more generators than $\saucy$
\end{block}

\begin{figure}[t]
\centering
\caption{cactus plot  total number of instances}%
\subfloat[with \saucy]{{\includegraphics[scale=0.3]{images/saucy-result}}}%
\hfill
\subfloat[with \bliss]{{\includegraphics[scale=0.3]{images/bliss-result}}}%
\label{fig:cactus}%
\end{figure}
\vspace{-0.3cm}
\begin{table}
\resizebox{1 \textwidth}{!}{
	\subfloat{%
		\begin{tabular}{l|ccccc}
			&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
			\midrule
			PAR-2 sum  & 8\,074\,348 & 7\,770\,434 & \cellcolor{gray!30}\textbf{6\,909\,999} & 7\,229\,700\\
			PAR-2 avg  & 5\,981 & 5\,756 & \cellcolor{gray!30}\textbf{5\,119} & 5\,355\\
			
		\end{tabular}
	}
	\hspace{1em}
	\subfloat{%
		\begin{tabular}{l|ccccc}
			&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
			\hline
			PAR-2 sum & 8\,074\,348 & 7\,517\,556 & 6\,444\,954 & \cellcolor{gray!30}\textbf{6\,245\,448}\\
			PAR-2 avg  & 5\,981 & 5\,569 & 4\,774 & \cellcolor{gray!30}\textbf{4\,626}\\
		\end{tabular}
	}
}
\vspace*{0.1cm}
\caption{time comparison}
\end{table}

\end{frame}

\begin{frame}{Experimental results (\unsat versus \sat)}
\begin{table}[h!]
\resizebox{1 \textwidth}{!}{
\subfloat[With \saucy]{%
	\begin{tabular}{l|ccccc}
		&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
		\midrule
		TOTAL (no dup)  & 261 & 302 & \cellcolor{gray!30}\textbf{371} & 345\\
	\end{tabular}
}
\hspace{1em}
\subfloat[With \bliss]{%
	\begin{tabular}{l|ccccc}
		&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
		\midrule
		TOTAL (no dup) & 261 & 324 & 415 & \cellcolor{gray!30}\textbf{439}\\
	\end{tabular}
}
}

\caption{comparison on \unsat instances}
\label{table:benchUNSAT}
\end{table}
\begin{table}
\resizebox{1 \textwidth}{!}{
\subfloat[With \saucy]{%
	\begin{tabular}{l|ccccc}
		&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
		\midrule
		TOTAL (no dup)  & 325 & 323 & \cellcolor{gray!30}\textbf{337} & 335\\
		
	\end{tabular}
}
\hspace{1em}
\subfloat[With \bliss]{%
	\begin{tabular}{l|ccccc}
		&\texttt{MiniSAT} & \texttt{Shatter} & \texttt{BreakID} & \texttt{MiniSym}\\
		\hline
		TOTAL (no dup) & 325 & 316 & 334 & \cellcolor{gray!30}\textbf{336}\\
	\end{tabular}
}
}
\vspace*{0.1cm}
\caption{comparison on \sat instances}
\end{table}
\end{frame}

%% ----------------------------------------------------------------------------

\begin{frame}
\frametitle{ESBP + SP}
TODO\\

Symmetry propagation on top of ESBP\\

Compose both approaches\\

Is it possible?

\end{frame}


\begin{frame}
\frametitle{Notion of local symmetries}
TODO\\

\end{frame}


\begin{frame}
\frametitle{Computation of local symmetries}
TODO\\

\end{frame}

\begin{frame}
\frametitle{Experimental results}
TODO\\

\end{frame}



\begin{frame}
\frametitle{Conclusion and Perspective}
TODO\\
Conclusion:

Perspectives:

\vfill
\textbf{Thanks !}
\end{frame}


%\begin{frame}
%\frametitle{Computing symmetries of a SAT problem}
%% \setlength{\tabcolsep}{35pt}
%
%\newcolumntype{C}{ >{\centering\arraybackslash} m{5cm} }
%\newcolumntype{D}{ >{\centering\arraybackslash} m{1cm} }
%\begin{tabular}{CC}
%	$CNF\ formula$ &{\scriptsize
%		\begin{tabular}{c}
%			$(x_1 \lor x_2 \lor x_3) \land
%			(x_4 \lor x_5 \lor x_6) \land
%			(x_7 \lor x_8 \lor x_9) $\\
%			$\land (\neg x_1 \lor \neg x_4) \land
%			(\neg x_1 \lor \neg x_7) \land
%			(\neg x_4 \lor \neg x_7)$\\
%			$\land (\neg x_2 \lor \neg x_5) \land
%			(\neg x_2 \lor \neg x_8) \land
%			(\neg x_5 \lor \neg x_8)$ \\
%			$\land (\neg x_3 \lor \neg x_6) \land
%			(\neg x_3 \lor \neg x_9) \land
%			(\neg x_6 \lor \neg x_9)$\\
%	\end{tabular}}\\
%	\only<2> {
%		
%		$\Downarrow$ & $\Downarrow$  \\
%		
%		colored graph & 
%		\includegraphics[scale=0.1]{images/graph}\\ \\
%	}
%	
%	\visible<3-> {
%		
%		$\Downarrow$ & $\Downarrow$  \\
%		
%		colored graph & 
%		\includegraphics[scale=0.05]{images/graph}\\ \\
%	}
%	\visible<3-> {
%		$\|$ & $\|$  \\
%		graph automorphism & 
%		\small{(\texttt{bliss} \footnote{http://www.tcs.hut.fi/Software/bliss/} or 
%			\texttt{saucy} \footnote{http://vlsicad.eecs.umich.edu/BK/SAUCY/})} 
%		\\
%	}
%	
%	
%	\visible<4-> {
%		$\Downarrow$ & $\Downarrow$  \\
%		
%		set of symmetries & %\begin{frame}
%		%\tikzstyle{every picture}+=[remember picture]
%		%\frametitle{An UNSAT example}
%		%\everymath{\displaystyle}
%		%\centering
%		%
%		%\begin{tabular}{cc}
%		%	\includegraphics[scale=0.07]{images/room} & \includegraphics[scale=0.07]{images/room}\\
%		%	\tikz[baseline]{\node[anchor=base] (r1){1};} & \tikz[baseline]{\node[anchor=base] (r2){2};}\\
%		%\end{tabular}
%		%
%		%\begin{tabular}{ccc}
%		%	\tikz[baseline]{\node[anchor=base] (g1){};} & \tikz[baseline]{\node[anchor=base] (g2){};} & \tikz[baseline]{\node[anchor=base] (g3){};}\\
%		%	\includegraphics[scale=0.1]{images/south} & \includegraphics[scale=0.1]{images/simpson} & \includegraphics[scale=0.09]{images/titeuf}\\
%		%	A                                        & B                                           & C\\
%		%\end{tabular}
%		%
%		%\visible<2->{
%		%	\begin{tikzpicture}[overlay]
%		%	\tikzstyle{line} = [<-, line width=0.5mm];
%		%	\path[line]<3> (r1) edge  (g1.south);
%		%	\path[line]<3> (r2) edge  (g2.south);
%		%	
%		%	\path[line]<4> (r1) edge  (g2.south);
%		%	\path[line]<4> (r2) edge  (g1.south);
%		%	
%		%	\path[line]<5> (r1) edge  (g1.south);
%		%	\path[line]<5> (r2) edge  (g3.south);
%		%	
%		%	\path[line]<6> (r1) edge  (g3.south);
%		%	\path[line]<6> (r2) edge  (g1.south);
%		%	
%		%	\path[line]<7> (r1) edge  (g2.south);
%		%	\path[line]<7> (r2) edge  (g3.south);
%		%	
%		%	\path[line]<8> (r1) edge  (g3.south);
%		%	\path[line]<8> (r2) edge  (g2.south);
%		%	
%		%	\visible<9>{
%		%	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (-1.75, 4.25) {};
%		%  	\node[draw, minimum width=3cm, minimum height=2cm,line width=0.5mm, color=orange](a) at (1.8, 4.25) {};
%		%  	
%		%	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (-3.5, 1.5) {};
%		%	\node[draw, minimum width=3.1cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (0.25, 1.5) {};
%		%	\node[draw, minimum width=3.5cm, minimum height=1.75cm,line width=0.5mm, color=blue](a) at (3.9, 1.5) {};
%		%	}
%		%	\end{tikzpicture}
%		%}
%		%
%		%\vfill
%		%Is it possible to attribute each group to a classroom?\\
%		%\begin{center}
%		%	\visible<8->{No!}
%		%\end{center}
%		%
%		%\end{frame}
%		\scriptsize
%		\begin{tabular}{c}
%			$g_1 = (x_2 \enspace x_3)(x_5 \enspace x_6)(x_8 \enspace x_9)$\\
%			$g_2 = (x_4 \enspace x_7)(x_5 \enspace x_8)(x_6 \enspace x_9)$\\
%			$g_3 = (x_1 \enspace x_2)(x_4 \enspace x_5)(x_7 \enspace x_8)$\\
%			$g_4 = (x_1 \enspace x_4)(x_2 \enspace x_5)(x_3 \enspace x_6)$
%		\end{tabular}
%	}
%\end{tabular}
%\end{frame}



%% ----------------------------------------------------------------------------

\begin{frame}[allowframebreaks,noframenumbering]
  \scriptsize
%  \nocite{*}
  \bibliographystyle{alpha}
  \bibliography{main}
\end{frame}

%
%\begin{frame}
%\frametitle{Conjunctive Normal Form (CNF)}
%\scriptsize
%
%$(x_2 x_3)(x_5 x_6)(x_8 x_9)(\neg x_2 \neg x_3)(\neg x_5 \neg x_6)(\neg x_8 \neg x_9)$
%$(x_4 x_7)(x_5 x_8)(x_6 x_9)(\neg x_4 \neg x_7)(\neg x_5 \neg x_8)(\neg x_6 \neg x_9)$\\
%$(x_1 x_2)(x_4 x_5)(x_7 x_8)(\neg x_1 \neg x_2)(\neg x_4 \neg x_5)(\neg x_7 \neg x_8)$\\
%$(x_1 x_4)(x_2 x_5)(x_3 x_6)(\neg x_1 \neg x_4)(\neg x_2 \neg x_5)(\neg x_3 \neg x_6)$\\
%
%
%$(x_2 x_3)(x_5 x_6)(x_8 x_9)$\\
%$(x_4 x_7)(x_5 x_8)(x_6 x_9)$\\
%$(x_1 x_2)(x_4 x_5)(x_7 x_8)$\\
%$(x_1 x_4)(x_2 x_5)(x_3 x_6)$\\
%
%\vfill
%$
%(x_1 \lor x_2 \lor x_3) \land
%(x_4 \lor x_5 \lor x_6) \land
%(x_7 \lor x_8 \lor x_9) \land
%(\neg x_1 \lor \neg x_4) \land
%(\neg x_1 \lor \neg x_7) \land
%(\neg x_4 \lor \neg x_7) \land
%(\neg x_2 \lor \neg x_5) \land
%(\neg x_2 \lor \neg x_8) \land
%(\neg x_5 \lor \neg x_8) \land
%(\neg x_3 \lor \neg x_6) \land
%(\neg x_3 \lor \neg x_9) \land
%(\neg x_6 \lor \neg x_9) 
%$
%\end{frame}
%



%\begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
%\newcommand{\x}{2.07}
%\newcommand{\y}{-1.5}
%
%\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize]
%\tikzstyle{unsat}=[draw,thick,fill=red]
%\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
%\tikzstyle{trlink}=[link,nearly transparent]
%\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
%\tikzstyle{trmid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=0.3,font=\scriptsize]
%
%% layer 1
%\node[decision](t) at (0,0) {$x_1$};
%
%% layer 2
%\node[decision](l) at (-\x,\y) {$x_2$};
%\node[decision](r) at (\x,\y) {$x_2$};
%
%% layer 3
%\node[decision](ll) at (-\x-\x*0.5,2*\y) {$x_3$};
%\node[decision](lr) at (-\x+\x*0.5,2*\y) {$x_3$};
%\node[decision](rl) at (\x-\x*0.5,2*\y) {$x_3$};
%\node[decision](rr) at (\x+\x*0.5,2*\y) {$x_3$};
%
%% layer 4
%\node[decision](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%\node[decision](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%\node[decision](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%\node[decision](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%
%% layer 5
%\node[unsat](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%\node[unsat](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%
%
%\draw[link] (t) ->  node [trmid] {$0$} (l);
%\draw[link] (t) -> node [mid] {$1$} (r);
%
%\draw[link] (l) ->  node [mid] {$0$} (ll);
%\draw[link] (l) -> node [mid] {$1$} (lr);
%\draw[link] (r) ->  node [mid] {$0$} (rl);
%\draw[link] (r) -> node [mid] {$1$} (rr);
%
%\draw[link] (ll) -> node [mid] {$0$} (lll);
%\draw[link] (ll) -> node [mid] {$1$} (llr);
%\draw[link] (lr) -> node [mid] {$0$} (lrl);
%\draw[link] (lr) -> node [mid] {$1$} (lrr);
%
%\draw[link] (rl) -> node [mid] {$0$} (rll);
%\draw[link] (rl) -> node [mid] {$1$} (rlr);
%\draw[link] (rr) -> node [mid] {$0$} (rrl);
%\draw[link] (rr) -> node [mid] {$1$} (rrr);
%
%
%\draw[link] (lll) -> node [mid] {$0$} (llll);
%\draw[link] (lll) -> node [mid] {$1$} (lllr);
%\draw[link] (llr) -> node [mid] {$0$} (llrl);
%\draw[link] (llr) -> node [mid] {$1$} (llrr);
%\draw[link] (lrl) -> node [mid] {$0$} (lrll);
%\draw[link] (lrl) -> node [mid] {$1$} (lrlr);
%\draw[link] (lrr) -> node [mid] {$0$} (lrrl);
%\draw[link] (lrr) -> node [mid] {$1$} (lrrr);
%
%\draw[link] (rll) -> node [mid] {$0$} (rlll);
%\draw[link] (rll) -> node [mid] {$1$} (rllr);
%\draw[link] (rlr) -> node [mid] {$0$} (rlrl);
%\draw[link] (rlr) -> node [mid] {$1$} (rlrr);
%\draw[link] (rrl) -> node [mid] {$0$} (rrll);
%\draw[link] (rrl) -> node [mid] {$1$} (rrlr);
%\draw[link] (rrr) -> node [mid] {$0$} (rrrl);
%\draw[link] (rrr) -> node [mid] {$1$} (rrrr);
%\end{tikzpicture}

\end{document}


% TODO REMOVE
%\begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
%\newcommand{\x}{3}
%\newcommand{\y}{-1.5}
%
%\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize,anchor=base]
%\tikzstyle{conflict}=[regular polygon,regular polygon sides=3,minimum height=1cm, anchor=base,xshift=-0.25cm,yshift=-0.25cm,draw,thick,fill=blue!5]
%
%\tikzstyle{propagation}=[rectangle, minimum height=.65cm, minimum width=.65cm,draw,thick,fill=blue!15,font=\scriptsize,anchor=base]
%\tikzstyle{space}=[regular polygon, regular polygon sides=3, minimum height=1cm, anchor=base,xshift=-0.25cm,yshift=-0.25cm,
% draw,thick,fill=blue!30,rotate=0,font=\scriptsize]
%\tikzstyle{unsat}=[draw,thick,fill=red]
%\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
%\tikzstyle{trlink}=[link,nearly transparent]
%\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
%\tikzstyle{trmid}=[midway,fill=white,opacity=1, text opacity=0,font=\scriptsize]
%
%	% layer 1
%    \node[decision](t) at (0,0) {$x_1$};
%    
%    % layer 2
%    \node[decision, opacity=0, onslide={<2-8>, opacity=1}](l) at (-\x,\y) {$x_6$};
%    
%%    \node[decision, opacity=0, onslide={<10>, opacity=1}](l) at (-\x,\y) {$x_4$};
%   % \node[space](r) at (\x,\y) {};
%    
%    % layer 3
%    \node[propagation](ll) at (-\x-\x*0.5,2*\y) {$x_8$};
%    \node[propagation](lr) at (-\x-\x*0.5,2*\y) {$x_4$};
%%    \node[decision](rl) at (\x-\x*0.5,2*\y) {$x_3$};
%%    \node[decision](rr) at (\x+\x*0.5,2*\y) {$x_3$};
%    
%	% layer 4
%%    \node[decision](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
%%    \node[decision](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%    \node[propagation](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_2$};
%%    \node[decision](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%
%	% layer 5
%%    \node[unsat](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%%    \node[unsat](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%    \node[unsat](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%    \node[propagation](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {$x_3$};
%    \node[scale=1.5](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {\ko};
%%    \node[unsat](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%    \node[unsat](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%    \node[unsat](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%    
%%    \node[unsat](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%
%
%	\draw[link,opacity=0, onslide={<2->, opacity=1}] (t) ->  node [trmid,onslide={<2->, text opacity=1}] {$0$} (l);
%%	\draw[link] (t) -> node [mid] {$1$} (r.north);
%%	\draw[link] (l) ->  node [mid] {$0$} (ll);
%	\draw[link] (l) -> node [mid] {$1$} (lr);
%%	\draw[link] (r) ->  node [mid] {$0$} (rl);
%%	\draw[link] (r) -> node [mid] {$1$} (rr);
%	
%%	\draw[link] (ll) -> node [mid] {$0$} (lll);
%%	\draw[link] (ll) -> node [mid] {$1$} (llr);
%	\draw[link] (lr) -> node [mid] {$0$} (lrl);
%%	\draw[link] (lr) -> node [mid] {$1$} (lrr);
%	
%%	\draw[link] (rl) -> node [mid] {$0$} (rll);
%%	\draw[link] (rl) -> node [mid] {$1$} (rlr);
%%	\draw[link] (rr) -> node [mid] {$0$} (rrl);
%%	\draw[link] (rr) -> node [mid] {$1$} (rrr);
%	
%	
%%	\draw[link] (lll) -> node [mid] {$0$} (llll);
%%	\draw[link] (lll) -> node [mid] {$1$} (lllr);
%%	\draw[link] (llr) -> node [mid] {$0$} (llrl);
%%	\draw[link] (llr) -> node [mid] {$1$} (llrr);
%	\draw[link] (lrl) -> node [mid] {$0$} (lrll);
%%	\draw[link] (lrl) -> node [mid] {$1$} (lrlr);
%%	\draw[link] (lrr) -> node [mid] {$0$} (lrrl);
%%	\draw[link] (lrr) -> node [mid] {$1$} (lrrr);
%	
%%	\draw[link] (rll) -> node [mid] {$0$} (rlll);
%%	\draw[link] (rll) -> node [mid] {$1$} (rllr);
%%	\draw[link] (rlr) -> node [mid] {$0$} (rlrl);
%%	\draw[link] (rlr) -> node [mid] {$1$} (rlrr);
%%	\draw[link] (rrl) -> node [mid] {$0$} (rrll);
%%	\draw[link] (rrl) -> node [mid] {$1$} (rrlr);
%%	\draw[link] (rrr) -> node [mid] {$0$} (rrrl);
%%	\draw[link] (rrr) -> node [mid] {$1$} (rrrr);
%\end{tikzpicture}




%\begin{tikzpicture}[scale=0.8, every node/.style={scale=0.8}]
%\newcommand{\x}{3}
%\newcommand{\y}{-1.5}
%
%\tikzstyle{decision}=[circle,draw,thick,fill=blue!30,font=\scriptsize,anchor=base]
%\tikzstyle{space}=[regular polygon, regular polygon sides=3, minimum height=1cm, anchor=base,xshift=-0.25cm,yshift=-0.25cm,
%draw,thick,fill=blue!30,rotate=0,font=\scriptsize]
%\tikzstyle{unsat}=[draw,thick,fill=red]
%\tikzstyle{link}=[->,>=latex,rounded corners=5pt,thick]
%\tikzstyle{trlink}=[link,nearly transparent]
%\tikzstyle{mid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=1,font=\scriptsize]
%\tikzstyle{trmid}=[midway,fill=white,nearly transparent,opacity=1, text opacity=0.3,font=\scriptsize]
%
%% layer 1
%\node[decision](t) at (0,0) {$x_1$};
%
%% layer 2
%\node[decision](l) at (-\x,\y) {$x_4$};
%% \node[space](r) at (\x,\y) {};
%
%% layer 3
%\node[decision](ll) at (-\x-\x*0.5,2*\y) {$x_7$};
%\node[decision](lr) at (-\x+\x*0.5,2*\y) {$x_3$};
%%    \node[decision](rl) at (\x-\x*0.5,2*\y) {$x_3$};
%%    \node[decision](rr) at (\x+\x*0.5,2*\y) {$x_3$};
%
%% layer 4
%\node[decision](lll) at (-\x-\x*0.5-\x*0.25,3*\y) {$x_5$};
%\node[decision](llr) at (-\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%\node[decision](lrl) at (-\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%\node[decision](lrr) at (-\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rll) at (\x-\x*0.5-\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rlr) at (\x-\x*0.5+\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rrl) at (\x+\x*0.5-\x*0.25,3*\y) {$x_4$};
%%    \node[decision](rrr) at (\x+\x*0.5+\x*0.25,3*\y) {$x_4$};
%
%% layer 5
%\node[unsat](llll) at (-\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lllr) at (-\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](llrl) at (-\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](llrr) at (-\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrll) at (-\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrlr) at (-\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%\node[unsat](lrrl) at (-\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%\node[unsat](lrrr) at (-\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%
%%    \node[unsat](rlll) at (\x-\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rllr) at (\x-\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rlrl) at (\x-\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rlrr) at (\x-\x*0.5+\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rrll) at (\x+\x*0.5-\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rrlr) at (\x+\x*0.5-\x*0.25+\x*0.125,4*\y) {};
%%	\node[unsat](rrrl) at (\x+\x*0.5+\x*0.25-\x*0.125,4*\y) {};
%%	\node[unsat](rrrr) at (\x+\x*0.5+\x*0.25+\x*0.125,4*\y) {}; 
%
%
%\draw[link] (t) ->  node [mid] {$0$} (l);
%%	\draw[link] (t) -> node [mid] {$1$} (r.north);
%\draw[link] (l) ->  node [mid] {$0$} (ll);
%\draw[link] (l) -> node [mid] {$1$} (lr);
%%	\draw[link] (r) ->  node [mid] {$0$} (rl);
%%	\draw[link] (r) -> node [mid] {$1$} (rr);
%
%\draw[link] (ll) -> node [mid] {$0$} (lll);
%\draw[link] (ll) -> node [mid] {$1$} (llr);
%\draw[link] (lr) -> node [mid] {$0$} (lrl);
%\draw[link] (lr) -> node [mid] {$1$} (lrr);
%
%%	\draw[link] (rl) -> node [mid] {$0$} (rll);
%%	\draw[link] (rl) -> node [mid] {$1$} (rlr);
%%	\draw[link] (rr) -> node [mid] {$0$} (rrl);
%%	\draw[link] (rr) -> node [mid] {$1$} (rrr);
%
%
%\draw[link] (lll) -> node [mid] {$0$} (llll);
%\draw[link] (lll) -> node [mid] {$1$} (lllr);
%\draw[link] (llr) -> node [mid] {$0$} (llrl);
%\draw[link] (llr) -> node [mid] {$1$} (llrr);
%\draw[link] (lrl) -> node [mid] {$0$} (lrll);
%\draw[link] (lrl) -> node [mid] {$1$} (lrlr);
%\draw[link] (lrr) -> node [mid] {$0$} (lrrl);
%\draw[link] (lrr) -> node [mid] {$1$} (lrrr);
%
%%	\draw[link] (rll) -> node [mid] {$0$} (rlll);
%%	\draw[link] (rll) -> node [mid] {$1$} (rllr);
%%	\draw[link] (rlr) -> node [mid] {$0$} (rlrl);
%%	\draw[link] (rlr) -> node [mid] {$1$} (rlrr);
%%	\draw[link] (rrl) -> node [mid] {$0$} (rrll);
%%	\draw[link] (rrl) -> node [mid] {$1$} (rrlr);
%%	\draw[link] (rrr) -> node [mid] {$0$} (rrrl);
%%	\draw[link] (rrr) -> node [mid] {$1$} (rrrr);
%\end{tikzpicture}